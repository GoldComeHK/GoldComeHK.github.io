<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>金come | 全自動營銷閉環系統</title>
    <style>
        body { font-family: Arial, sans-serif;background: linear-gradient(145deg, #a8a8a8, #000000);color: #ecf0f1;padding: 20px; }
        h1 { text-align: center;margin-bottom: 20px;font-size: 2em;text-shadow: 2px 2px 4px gold; }
        .container { max-width: 600px;margin: 0 auto;padding: 20px;border-radius: 12px;background: #2f3030;box-shadow: 4px 4px 8px #767676; }
        label, p { margin: 10px 0 5px; }
        input, textarea, select, button { margin-bottom: 10px;padding: 8px;border-radius: 8px;border: none;outline: none; }
        input, textarea, select { width: 100%; }
        .大鍵 {border-radius: 10px; background: #282828;color: #bdbdbd;box-shadow: inset 25px 25px 50px rgba(139, 139, 139, 0.8);border: 1px solid #686868;font-size: 48px;width: 100%; }
        .大鍵:hover { background: #484949; }
        button { background-color: #000000;color: white;cursor: pointer; }
        button:hover { background-color: #484949; }
        
        .reply-group { margin-bottom: 15px;position: relative; }
        .delete-btn { position: absolute;right: -15px;top: 35%;transform: translateY(-50%);width: 30px;height: 30px;background-color: #444;color: white;border-radius: 50%;display: flex;align-items: center;justify-content: center;font-size: 16px;padding: 0; }
        .delete-btn:hover { background-color: #777; }
        .reply-container { display: flex;align-items: center;gap: 10px; }
        .reply-inputs { flex-grow: 1; }
        .hidden,#uploadInput,.執行金come { display: none; }
        .執行金come{place-items: center;}
    </style>

  <!-- ws icon https://www.thinkcmf.com/font/font_awesome/icons.html -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <script src="https://code.jquery.com/jquery-3.7.0.js"></script>
  <script src="../mokJsapi/a.js">//琪琪修改</script>
  <script src="py/py.js"></script>
  <script src="https://cdn.staticfile.net/translate.js/3.1.7/translate.js">// 翻譯 放最後</script>

</head>
<body>
    <samp id="莫生查詢" style="display: none;">莫生我要查詢金come使用問題</samp>
    <h1><a href="./set.html"><b class="_我司名"></b></a> | 搵客鍠🔍</h1>
    <p class="mokJsApi_copyright">版權</p>


    


















    <div class="container" style="padding: 20px;">
        <iframe width="100%" height="315" src="https://www.youtube.com/embed/dBTxzLg-eFA?si=PTpM-9-b3_jeVNB6" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
    </div>











































    <div  class="container" style="padding: 20px;">
        
            <!-- 部份1: 帳號 -->
            <label>您的手機地區號</label>
            <input id="區號" type="text" placeholder="例如: 86" title="例如: 86" required>
            <label>您的WhatsApp 號碼</label>
            <input id="WhatsApp號" type="text" placeholder="輸入WhatsApp號碼" title="輸入WhatsApp號碼" required>



            <!-- 部份2: setting -->
            <div class="reply-group">
                
                <label>請選擇客戶地區*</label>
                <select id="地區" title="請選擇客戶地區">
                    <option value="hk" selected>香港</option>
                    <option value="usa" >美國</option>
                </select>

                <label>請填寫客戶關鍵字</label>
                <input id="關鍵字" type="text" placeholder="請填寫客戶關鍵字" title="請填寫客戶關鍵字" value="金融">
            
            </div>

            <!-- 部份3: 結果 -->
            <textarea id="搵客鍠結果" ></textarea>
            <p id="臨時結果"></p>

            <samp style="float: right;">
            <button onclick="下載設定檔()">⬇️ 下載設定檔</button>
            <input type="file" id="uploadInput" accept=".json" onchange="上傳設定檔(event)">
            <button onclick="document.getElementById('uploadInput').click()">⬆️ 上傳設定檔</button>



        </samp>        



            <!-- 部份4: _顯示聯莫 -->
            <div id="ContactAKI" class="ContactAKI"><!-- JS _顯示聯莫 --></div>
            <br>

            <!-- 部份5: 執行金come -->
            <div class="執行金come">
                <button class="大鍵"  title="執行搵客鍠 🔍" onclick="執行搵客鍠()">執行搵客鍠 🔍</button>
                <h3><a href="./set.html">返回<b class="_我司名"></b></a></h3>
            </div>

            <div class="scroll-top" id="scrollTop" onclick="scrollToTop()">↑</div>

    </div>




































































































    <script>

        AllData位 = ['區號','WhatsApp號','關鍵字','地區','搵客鍠結果']
        // loadSaved 自動保存
        function saveToLocalStorage(key, value) {
            localStorage.setItem(key, value);
        }

        function loadFromLocalStorage(key) {
            return localStorage.getItem(key);
        }

        function loadSavedData() {
            AllData位.forEach((field) => {
                const element = document.getElementById(field);
                if (element) {
                    element.value = loadFromLocalStorage(field) || '';
                }
            });
        }

        window.addEventListener('beforeunload', () => {
            AllData位.forEach((field) => {
                saveToLocalStorage(field, document.getElementById(field).value);
            });
        });



        // 手動上下載
        function 下載設定檔() {
            const data = AllData位.reduce((obj, field) => {
                const element = document.getElementById(field);
                obj[field] = element ? element.value : '';
                return obj;
            }, {});

            const blob = new Blob([JSON.stringify(data, null, 2)], { type: "application/json" });
            const url = URL.createObjectURL(blob);
            
            const link = document.createElement("a");
            link.href = url;
            link.download = "whatsapp_設定檔.json";
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }



        function 上傳設定檔(event) {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const importedData = JSON.parse(e.target.result);
                    
                    // 使用 AllData位 自动匹配并导入数据
                    AllData位.forEach(field => {
                        const element = document.getElementById(field);
                        if (element) {
                            element.value = importedData[field] || '';
                        }
                    });

                    alert("設定檔已成功匯入！");
                } catch (error) {
                    alert("檔案格式錯誤或解析失敗");
                    console.error("解析错误:", error);
                }
            };
            reader.readAsText(file);
        }






        // 監聽臨時結果元素的變化
        const 臨時結果 = document.getElementById("臨時結果");
        const 搵客鍠結果 = document.getElementById("搵客鍠結果");

        const observer = new MutationObserver(function(mutations) {
            mutations.forEach(function(mutation) {
                if (臨時結果.innerHTML.trim() !== "") {  // 改用innerHTML
                    // 將<br>轉換為換行符
                    const 格式化內容 = 臨時結果.innerHTML
                        .replace(/<br\s*\/?>/gi, "\n")  // 處理普通<br>
                        .replace(/<\/?[^>]+(>|$)/g, ""); // 移除其他HTML標籤（可選）
                    
                    搵客鍠結果.value = 格式化內容 + "\n" + 搵客鍠結果.value;
                    臨時結果.innerHTML = ""; // 用innerHTML清空
                }
            });
        });

        // 開始觀察臨時結果元素的子節點和文本內容變化
        observer.observe(臨時結果, {
            
            childList: true,
            characterData: true,
            subtree: true
        });







        // 获取元素
        const resultTextarea = document.getElementById('搵客鍠結果');

        // 内容变化监听函数
        function toggleVisibility() {
        const hasContent = resultTextarea.value.trim().length > 0;
        
        // 使用 classList 切换样式
        resultTextarea.classList.toggle('hidden', !hasContent);
        
        // 可选：添加辅助功能提示
        if (hasContent) {
            resultTextarea.setAttribute('aria-hidden', 'false');
        } else {
            resultTextarea.setAttribute('aria-hidden', 'true');
        }
        }

        // 事件监听（兼容现代浏览器）
        resultTextarea.addEventListener('input', toggleVisibility);
        resultTextarea.addEventListener('paste', toggleVisibility);  // 处理粘贴操作
        resultTextarea.addEventListener('cut', toggleVisibility);    // 处理剪切操作

        // 初始化检查
        toggleVisibility();

        // 可选：处理页面加载后的动态内容注入
        window.addEventListener('load', function() {
        // 如果通过其他方式加载内容需要再次检查
        toggleVisibility();
        });















        /* ********************* */
        async function 執行搵客鍠() {
            const 區號 = document.getElementById('區號').value;
            const WhatsApp號 = document.getElementById('WhatsApp號').value;
            const 關鍵字 = document.getElementById('關鍵字').value;
            const 地區 = document.getElementById('地區').value;
            let 搵客鍠py
            // 按地區選py code
            if (地區 == 'hk') {
                搵客鍠py = 搜HK;
            }

            const 執行碼 = 搵客鍠py.replace("@帳號1181@", `'${區號}','${WhatsApp號}','搵客鍠'`).replace(/@關鍵字@/g, 關鍵字); 
            navigator.clipboard.writeText(執行碼);
            // py 檢查 剪贴板 轉變執行
        }
        /* ********************* */






















        function _翻譯(){ 
            translate.service.use('client.edge'); //設置機器翻譯服務通道，直接客戶端本身，不依賴服務端 。相關說明參考 http://translate.zvo.cn/43086.html
            translate.execute();//進行翻譯 
        }
        // 等待頁面完全加載 
        window.onload = function() {
            // 再顯示按鈕
            document.querySelector('.執行金come').style.display = 'grid';
        };
        function Start() {
            // 顯示聯莫
            const 聯莫 = ['moksurky@gmail.com','https://wa.me/85264071181/','https://i.meee.com.tw/atcX6QM.png','https://www.instagram.com/moksurky2025/','https://line.me/ti/p/UlSPd7p9zh/','https://www.facebook.com/aki.mok.10/','http://t.me/mokaki/'
            ];
            _翻譯()
            _顯示聯莫(聯莫);
            
            loadSavedData();
        }
        琪琪修改()
    </script>
</body>
</html>